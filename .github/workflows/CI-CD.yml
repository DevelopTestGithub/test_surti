name: Dart CI
on:  
   pull_request:
     branches: 
       - master 
jobs:
 build-and-test: 
  runs-on: ${{ matrix.os }}
  strategy:
    matrix:
      os: [ubuntu-latest, macos-latest, windows-latest]
  steps:
  - uses: actions/checkout@v1 
  - uses: actions/setup-java@v1
    with:
      java-version: '12.x'
  - uses: subosito/flutter-action@v1
    with:
      channel: 'dev'  
  # Get flutter packages
  - run: flutter pub get
    # Build :D 
  - run: flutter build aot
  - run: flutter build apk --debug --split-per-abi
  - name: Create a Release APK
    uses: ncipollo/release-action@v1
    with:
     artifacts: "build/app/outputs/apk/debug/*.apk"
